> #Trimming and Winsorizing of outliers in data
> 
> #install.packages("psych") #recall there is a useful function in the psych package that provides descriptive statistics
>                            #see R_ Basic descriptive statistics useful for psychometrics.pdf
> library(psych)
> 
> options (digits=5)
> 
> #diameters of ball bearings n=10
> diameter <- c(.017 ,.018, .023, .031, .031, .033, .036, .070, .079, .200)  #data 
> 
> trim1 <- describe(diameter,trim=0.0)
> print(trim1,digits=5)
   vars  n   mean      sd median trimmed     mad   min max range   skew kurtosis      se
X1    1 10 0.0538 0.05542  0.032  0.0538 0.01705 0.017 0.2 0.183 1.7515   1.9021 0.01753
> 
> trim2 <- describe(diameter,trim=0.1)
> print(trim2,digits=5)
   vars  n   mean      sd median trimmed     mad   min max range   skew kurtosis      se
X1    1 10 0.0538 0.05542  0.032 0.04012 0.01705 0.017 0.2 0.183 1.7515   1.9021 0.01753
> 
> trim3 <- describe(diameter,trim=0.2)
> print(trim3,digits=5)
   vars  n   mean      sd median trimmed     mad   min max range   skew kurtosis      se
X1    1 10 0.0538 0.05542  0.032 0.03733 0.01705 0.017 0.2 0.183 1.7515   1.9021 0.01753
> 
> #Winsorizing
> if (FALSE)
+ {"
+ Winsorizing function -  The top and bottom trim values are given values of the trimmed and 1- trimmed quantiles. 
+ winsor(x, trim = 0.2, na.rm = TRUE)
+ winsor.mean(x, trim = 0.2, na.rm = TRUE)
+ winsor.means(x, trim = 0.2, na.rm = TRUE)  
+ winsor.sd(x, trim = 0.2, na.rm = TRUE)  
+ winsor.var(x, trim = 0.2, na.rm = TRUE)  
+ x - A data vector, matrix or data frame
+ trim - Percentage of data to move from the top and bottom of the distributions
+ na.rm -Missing data are removed 
+ "}
> 
> quantile(diameter, prob = c(0.10, 0.90)) #obtain the .10 and .90 quantile of diameter
   10%    90% 
0.0179 0.0911 
> 
> y <- winsor(diameter, trim=.1) 
> diameter
 [1] 0.017 0.018 0.023 0.031 0.031 0.033 0.036 0.070 0.079 0.200
> y
 [1] 0.0179 0.0180 0.0230 0.0310 0.0310 0.0330 0.0360 0.0700 0.0790 0.0911
> 
> winsor.mean(diameter, trim=.1) #Winsorized mean
[1] 0.043
> print(trim2,digits=5)  #compare trimmed mean (0.1) with Winsorized mean (0.1)
   vars  n   mean      sd median trimmed     mad   min max range   skew kurtosis      se
X1    1 10 0.0538 0.05542  0.032 0.04012 0.01705 0.017 0.2 0.183 1.7515   1.9021 0.01753
> 
> 
> 
